<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2026-02-07T00:00:00.000Z" agent="5.0" version="24.1.0" type="device">
  <diagram id="sqlserver-cdc-architecture" name="SQL Server CDC Architecture">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="900" background="#ffffff" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        
        <!-- Data Source Layer -->
        <mxCell id="2" value="Data Source Layer" style="text;html=1;fontSize=16;fontStyle=1;verticalAlign=top;align=left;" parent="1" vertex="1">
          <mxGeometry x="20" y="20" width="200" height="30" as="geometry"/>
        </mxCell>
        
        <mxCell id="sqlserver_db" value="SQL Server Database&#xa;testdb&#xa;(CDC Enabled)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#cc2927;fontColor=#ffffff;fontSize=12;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="60" y="70" width="140" height="100" as="geometry"/>
        </mxCell>
        
        <!-- Change Capture Components -->
        <mxCell id="3" value="Change Capture Layer" style="text;html=1;fontSize=16;fontStyle=1;verticalAlign=top;align=left;" parent="1" vertex="1">
          <mxGeometry x="20" y="200" width="200" height="30" as="geometry"/>
        </mxCell>
        
        <mxCell id="cdc_log" value="CDC Log&#xa;sys.fn_cdc_get_all_changes_*" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#6fa8dc;fontColor=#ffffff;fontSize=11;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="60" y="250" width="140" height="80" as="geometry"/>
        </mxCell>
        
        <mxCell id="cdc_table" value="Change Tables&#xa;cdc.dbo_Customers_CT" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#6fa8dc;fontColor=#ffffff;fontSize=11;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="260" y="250" width="140" height="80" as="geometry"/>
        </mxCell>
        
        <mxCell id="debezium_conn" value="Debezium SQL Server Connector&#xa;SQL Server CDC Mode" style="rounded=1;whiteSpace=wrap;html=1;fillColor:#937dc2;fontColor=#ffffff;fontSize=12;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="260" y="380" width="160" height="90" as="geometry"/>
        </mxCell>
        
        <!-- Streaming Layer -->
        <mxCell id="4" value="Event Streaming Layer" style="text;html=1;fontSize=16;fontStyle=1;verticalAlign=top;align=left;" parent="1" vertex="1">
          <mxGeometry x="20" y="510" width="200" height="30" as="geometry"/>
        </mxCell>
        
        <mxCell id="zk" value="Zookeeper&#xa;2181" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#6fa8dc;fontColor=#ffffff;fontSize=12;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="60" y="560" width="120" height="80" as="geometry"/>
        </mxCell>
        
        <mxCell id="kafka" value="Kafka Broker&#xa;9092" style="rounded=1;whiteSpace=wrap;html=1;fillColor:#ff9933;fontColor=#ffffff;fontSize=12;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="260" y="560" width="120" height="80" as="geometry"/>
        </mxCell>
        
        <mxCell id="topics" value="Kafka Topics&#xa;• sqlserver.dbo.Customers&#xa;• dbhistory.mssql&#xa;• connect-configs" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ff9933;fontColor=#ffffff;fontSize=10;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="460" y="560" width="180" height="80" as="geometry"/>
        </mxCell>
        
        <!-- Messaging Layer -->
        <mxCell id="5" value="Messaging Layer" style="text;html=1;fontSize=16;fontStyle=1;verticalAlign=top;align=left;" parent="1" vertex="1">
          <mxGeometry x="20" y="680" width="200" height="30" as="geometry"/>
        </mxCell>
        
        <mxCell id="rabbitmq" value="RabbitMQ Broker&#xa;5672 / 15672" style="rounded=1;whiteSpace=wrap;html=1;fillColor:#ff6600;fontColor=#ffffff;fontSize=12;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="260" y="730" width="140" height="80" as="geometry"/>
        </mxCell>
        
        <mxCell id="queue" value="RabbitMQ Queues&#xa;• cdc.customers&#xa;• dlq.customers" style="rounded=1;whiteSpace=wrap;html=1;fillColor:#ff6600;fontColor=#ffffff;fontSize=10;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="460" y="730" width="160" height="80" as="geometry"/>
        </mxCell>
        
        <!-- Consumer Layer -->
        <mxCell id="6" value="Consumer Layer" style="text;html=1;fontSize=16;fontStyle=1;verticalAlign=top;align=left;" parent="1" vertex="1">
          <mxGeometry x="800" y="200" width="200" height="30" as="geometry"/>
        </mxCell>
        
        <mxCell id="consumer_app" value="CDC Consumer App&#xa;.NET 10" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#68217a;fontColor=#ffffff;fontSize=12;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="820" y="250" width="140" height="90" as="geometry"/>
        </mxCell>
        
        <mxCell id="processing" value="Event Processing&#xa;• Parse CDC Messages&#xa;• Handle CRUD Ops&#xa;• Logging &amp; Monitoring" style="rounded=1;whiteSpace=wrap;html=1;fillColor:#68217a;fontColor=#ffffff;fontSize=10;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="820" y="380" width="140" height="110" as="geometry"/>
        </mxCell>
        
        <!-- Edges -->
        <mxCell id="edge1" edge="1" parent="1" source="sqlserver_db" target="cdc_log">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="edge2" edge="1" parent="1" source="cdc_log" target="cdc_table">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="edge3" edge="1" parent="1" source="cdc_table" target="debezium_conn">
          <mxGeometry relative="1" as="geometry">
            <mxPoint as="sourcePoint" x="330" y="330"/>
            <mxPoint as="targetPoint" x="340" y="380"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="edge4" edge="1" parent="1" source="debezium_conn" target="kafka">
          <mxGeometry relative="1" as="geometry">
            <mxPoint as="sourcePoint" x="340" y="470"/>
            <mxPoint as="targetPoint" x="320" y="560"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="edge5" edge="1" parent="1" source="zk" target="kafka">
          <mxGeometry relative="1" as="geometry">
            <mxPoint as="sourcePoint" x="180" y="600"/>
            <mxPoint as="targetPoint" x="260" y="600"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="edge6" edge="1" parent="1" source="kafka" target="topics">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="edge7" edge="1" parent="1" source="topics" target="rabbitmq">
          <mxGeometry relative="1" as="geometry">
            <mxPoint as="sourcePoint" x="550" y="640"/>
            <mxPoint as="targetPoint" x="330" y="730"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="edge8" edge="1" parent="1" source="rabbitmq" target="queue">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="edge9" edge="1" parent="1" source="queue" target="consumer_app">
          <mxGeometry relative="1" as="geometry">
            <mxPoint as="sourcePoint" x="620" y="770"/>
            <mxPoint as="targetPoint" x="820" y="295"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="edge10" edge="1" parent="1" source="consumer_app" target="processing">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
